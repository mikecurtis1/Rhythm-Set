<!DOCTYPE html>
<html>
<head>
<style>
body {
	background-color:#ccccaa;
}
pre {
	background-color:#ffffff;
	padding:1em;
}
</style>
</head>
<body>
<h1>Factorial Permutation</h1>
<div id="permutations">Factorial Permutations: <br /></div>
<script>

// https://stackoverflow.com/questions/9960908/permutations-in-javascript

var html = '';

//var arr = [];
//var arr = ['A'];
//var arr = ['A','B'];
//var arr = ['A','B','C'];
//var arr = ['A','B','C','D'];
var arr = ['A','B','C','D','E'];
//var arr = ['A','B','C','D','E','F'];
//var arr = ['A','B','C','D','E','F','G'];
//var arr = ['A','B','C','D','E','F','G','H'];
//var arr = ['A','B','C','D','E','F','G','H','I'];
//var arr = ['A','B','C','D','E','F','G','H','I','J']; // 10, 3 seconds, but display format crashes here!
//var arr = ['A','B','C','D','E','F','G','H','I','J','K']; // 11, 40 section
//var arr = ['A','B','C','D','E','F','G','H','I','J','K','L']; // 12, 8 minutes
//var arr = ['A','B','C','D','E','F','G','H','I','J','K','L','M']; // 13, 2 hours 
//var arr = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N']; // 14, 1 day
//var arr = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O']; // 15, 2 weeks
//var arr = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P']; // 16, 8 months
//var arr = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q']; // 17, 10 years
//var arr = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R'];
//var arr = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S'];
//var arr = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T'];
//var arr = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U'];
//var arr = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V'];
//var arr = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W'];
//var arr = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X'];
//var arr = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y'];
//var arr = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];

function perms(xs) {
	if (!xs.length) return [[]];
	return xs.flatMap(x => {
		// get permutations of xs without x, then prepend x to each
		return perms(xs.filter(v => v!==x)).map(vs => [x, ...vs]);
	});
};

const permutator = (inputArr) => {
	let result = [];
	const permute = (arr, m = []) => {
		if (arr.length === 0) {
			result.push(m);
		} else {
			for (let i = 0; i < arr.length; i++) {
				let curr = arr.slice();
				let next = curr.splice(i, 1);
				permute(curr.slice(), m.concat(next));
			}
		}
	}
	permute(inputArr);

	return result;
}

//arr3 = perms(arr);

//console.log(perms(arr));

s = new Date().toISOString();
console.log(s);
start = Date.now();

symmetrical_group = permutator(arr);

//console.log(symmetrical_group);

e = new Date().toISOString();
console.log(e);
end = Date.now();

diff = end-start;

console.log(diff);

function msToHMS( ms ) {
    // 1- Convert to seconds:
    let seconds = ms / 1000;
    // 2- Extract hours:
    const hours = parseInt( seconds / 3600 ); // 3,600 seconds in 1 hour
    seconds = seconds % 3600; // seconds remaining after extracting hours
    // 3- Extract minutes:
    const minutes = parseInt( seconds / 60 ); // 60 seconds in 1 minute
    // 4- Keep only seconds not extracted to minutes:
    seconds = seconds % 60;
    return hours+":"+minutes+":"+seconds;
}

console.log(msToHMS(diff));  

htmlString = '';

for (let i = 0; i< symmetrical_group.length; i++){
	htmlString += i.toString().padStart(12,' ') + ' => ' + symmetrical_group[i].join(':') + '\n';
}

document.getElementById("permutations").insertAdjacentHTML("beforeend", `<pre>${htmlString}</pre>`); // beforeend afterbegin

</script>
</body>
</html>
